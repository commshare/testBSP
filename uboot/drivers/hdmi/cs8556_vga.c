/*
 * CH7025/CH7026 TV0UT CVBS driver
 *
 * Copyright (C) 2012 NUFRONT, Inc.
 * Written by Ping Chen <ping.chen@nufront.com>
 *
 * This package is free software; you can redistribute it and/or modify
 * it under the terms of the GNU General Public License version 2 as
 * published by the Free Software Foundation.
 *
 * THIS PACKAGE IS PROVIDED ``AS IS'' AND WITHOUT ANY EXPRESS OR
 * IMPLIED WARRANTIES, INCLUDING, WITHOUT LIMITATION, THE IMPLIED
 * WARRANTIES OF MERCHANTIBILITY AND FITNESS FOR A PARTICULAR PURPOSE.
 *
 */


#include "cs8556.h"



struct fb_videomode vga_mode [] = {
	{ "640x480@60Hz", 60,     640,    480,    39721,  40,     24,     32,     11,     96,     2,  0,      0,  0},
	{ "800x600@60Hz", 60,     800,    600,    25000,  88,     40,     23,     1,  128,    4,  0,      0,  17},
	{ "1024x768@60Hz",60,     1024,   768,    15384,  160,    24,     29,     3,  136,    6,  0,      0,  0},
	{ "1024x600@60Hz",60,     1024,   600,    22857,  53, 88, 4,  16, 35, 5,  0,      0,  0},
};

struct fb_videomode cs8556_vga_mode [] = {
	{ "640x480@60Hz", 60,     640,    480,    39721,  40,     24,     32,     11,     96,     2,  0,      0,  0},
	{ "800x600@60Hz", 60,     800,    600,    25000,  88,     40,     23,     1,  128,    4,  0,  0,  17},
	{ "1024x768@60Hz",60,     1024,   768,    15384,  160,    24,     29,     3,  136,    6,  0,  0,  0},
	{ "1024x600@60Hz",60,     1024,   600,    22857,  53, 88, 4,  16, 35, 5,  0,      0,  0},
};

unsigned char RGB888_800x600_to_vga_Offset00[]=
{
0x0F,0x80,0x00,0x00,0x80,0x00,0x00,0x00,0x00,0x00,0x02,0x02,0x01,0x00,0x01,0x00,
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
0x1f,0x04,0x80,0x00,0xD8,0x00,0x00,0x03,0x00,0x00,0x00,0x10,0x00,0x00,0x00,0x00,
0x0c,0x02,0x06,0x00,0x10,0x00,0x00,0x02,0x00,0x00,0x48,0x00,0x27,0x01,0x37,0x00,
0x22,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
0xB3,0x06,0x7F,0x00,0x04,0x01,0xA4,0x06,0x00,0xE6,0x60,0x10,0x8E,0x00,0x11,0x02,
0x0C,0x02,0x04,0x00,0x12,0x00,0x04,0x01,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
};


unsigned char RGB888_800x600_to_vga_Offset00_2[]=
{
0x22,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
0x04,0x01,0x11,0x0D,0x00,0x00,0x00,0x02,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
0xFF,0xFF,0x00,0x00,0xFF,0xFF,0x00,0x00,0x80,0x80,0x00,0x00,0x80,0x80,0x00,0x00,
0xFF,0xFF,0xFF,0xFF,0x00,0x00,0x00,0x00,0x80,0x80,0x80,0x80,0x00,0x00,0x00,0x00,
0xFF,0x00,0xFF,0x00,0xFF,0x00,0xFF,0x00,0x80,0x00,0x80,0x00,0x80,0x00,0x80,0x00,
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
0x01,0x01,0x08,0x00,0x01,0x02,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xF0,0x00,0x00,0x00,0x00,0x00,0x00,0x00
};


unsigned char RGB888_800x600_to_vga_Offset01[]=
{
0x80,0x10,0x80,0x00,0x00,0x00,0x99,0x11,0x2A,0x00,0x70,0x30,0x2A,0x71,0x9C,0x00,
0x10,0x2A,0x85,0x82,0x00,0x00,0xFF,0x00,0x00,0xFF,0x00,0x00,0xFF,0x00,0x00,0x00,
0x41,0x21,0x98,0x08,0xCC,0x00,0x4C,0x08,0x00,0x00,0x00,0x00,0x40,0x00,0x40,0x00,
0x00,0x01,0xEE,0x02,0x3A,0x07,0x65,0x04,0x14,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
0x06,0x40,0x07,0x30,0x15,0x10,0x31,0x02,0x33,0x12,0x34,0x52,0x38,0x42,0x39,0x62,
0x48,0x12,0x64,0x04,0x66,0x14,0x00,0x10,0x00,0x10,0x00,0x10,0x00,0x10,0x00,0x10,
0x7E,0x10,0x00,0xF4,0x10,0x76,0x08,0x00,0x8A,0x00,0xFF,0x11,0xFF,0xFF,0x81,0x00,
0x03,0x00,0x89,0x45,0x01,0x45,0x00,0x00,0x03,0x00,0x00,0x10,0x00,0x00,0x00,0x00,
};

unsigned char RGB888_800x600_to_vga_Offset01_2[]=
{
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00
};




int cs8556_vga_init(struct cs8556 cs8556,struct fb_videomode *mode)
{
	int i0 = 0;
	int r_val;
	int temp;
	const struct fb_videomode	*outmode;
	
	cs8556_write_mutil_reg(0x00,0x00,&RGB888_800x600_to_vga_Offset00,128);
	cs8556_write_mutil_reg(0x00,0x80,&RGB888_800x600_to_vga_Offset00_2,128);
	cs8556_write_mutil_reg(0x01,0x00,&RGB888_800x600_to_vga_Offset01,128);
	cs8556_write_mutil_reg(0x01,0x80,&RGB888_800x600_to_vga_Offset01_2,128);

	return 0;
}


int vga_get_status(struct ns115_display_device *device)
{
	if(cs8556.mode < TVOUT_VGA_640x480p_60)
		return 1;
	else
		return 0;
}



int cs8556_register_display_vga(struct cs8556 cs8556)
{
	int i;
	struct fb_videomode fb_mode;
	if(cs8556.mode <= TVOUT_CVBS_PAL)
	{
		fb_mode = vga_mode[cs8556.mode-1];
	}
	else
	{
		fb_mode = vga_mode[1];
	}
		fb_mode = vga_mode[1];

	cs8556_vga_init(cs8556, &fb_mode);
    return 0;
}


int cs8556_unregister_display_vga()
{
}
