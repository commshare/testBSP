/*
 * Basic window sizes.  These probably belong somewhere more globally
 * useful.
 */

#define gc0311_ID           0x9d

#define VGA_WIDTH           640
#define VGA_HEIGHT          480
#define QVGA_WIDTH          320
#define QVGA_HEIGHT         240
#define QCIF_WIDTH          176
#define QCIF_HEIGHT         144

#define gc0311_FRAME_RATE   7

#define gc0311_I2C_ADDR     0x42
#define COM7_FMT_VGA        0x00
#define REG_COM7            0xfe
#define COM7_RESET          0x80
#define REG_PID             0xf0

struct gc0311_format_struct;            /* coming later */
struct gc0311_info {
    struct gc0311_format_struct *fmt;   /* Current format */
    unsigned char sat;                  /* Saturation value */
    int hue;                            /* Hue value */
};

struct regval_list {
    unsigned char reg_num;
    unsigned char value;
};

static  struct regval_list WB_Auto[]=
{
    {0xfe, 0x00},
    {0x77, 0x57},
    {0x78, 0x4d},
    {0x79, 0x45},
    {0x42, 0x57},
    {0xff, 0xff}
};

static  struct regval_list WB_Cldy[]=
{
    {0xfe, 0x00},
    {0x42, 0x55},
    {0x77, 0x8c},
    {0x78, 0x50},
    {0x79, 0x40},
    {0xff, 0xff}
};

static  struct regval_list WB_ClDa[]=
{
    {0xfe, 0x00},
    {0x42, 0x55},
    {0x77, 0x74},
    {0x78, 0x52},
    {0x79, 0x40},
    {0xff, 0xff}
};

static  struct regval_list WB_TungstenLamp1[]=
{
    {0xfe, 0x00},
    {0x42, 0x55},
    {0x77, 0x48},
    {0x78, 0x40},
    {0x79, 0x5c},
    {0xff, 0xff}

};

static  struct regval_list WB_TungstenLamp2[]=
{
    {0xfe, 0x00},
    {0x42, 0x55},
    {0x77, 0x40},
    {0x78, 0x42},
    {0x79, 0x50},
    {0xff, 0xff}
};

static struct regval_list *WBSeqe[] = {
    WB_Auto,
    WB_TungstenLamp1,
    WB_TungstenLamp2,
    WB_ClDa,
    WB_Cldy,
};

static  struct regval_list Bt_n4[]=
{
    {0xfe, 0x00},
    {0xd5, 0xe0},
    {0xff, 0xff}
};

static  struct regval_list Bt_n3[]=
{
    {0x41, 0x1f},
    {0xbd, 0x30},
    {0xbe, 0x09},
    {0xff, 0xff},
};

static  struct regval_list Bt_n2[]=
{
    {0xfe, 0x00},
    {0xd5, 0xf0},
    {0xff, 0xff}

};
static  struct regval_list Bt_n1[]=
{
    {0xfe, 0x00},
    {0xd5, 0xf0},
    {0xff, 0xff}
};
static  struct regval_list Bt_0[]=
{
    {0xfe, 0x00},
    {0xd5, 0x00},
    {0xff, 0xff}
};
static  struct regval_list Bt_p1[]=
{
    {0x41, 0x1f},
    {0xbd, 0x10},
    {0xbe, 0x01},
    {0xff, 0xff},
};
static  struct regval_list Bt_p2[]=
{
    {0xfe, 0x00},
    {0xd5, 0x20},
    {0xff, 0xff}

};
static  struct regval_list Bt_p3[]=
{
    {0x41, 0x1f},
    {0xbd, 0x30},
    {0xbe, 0x01},
    {0xff, 0xff},
};

static  struct regval_list Bt_p4[]=
{
    {0xfe, 0x00},
    {0xd5, 0x40},
    {0xff, 0xff}
};


static struct regval_list *BtSeqe[] = {
    Bt_n4,
    Bt_n3,
    Bt_n2,
    Bt_n1,
    Bt_0,
    Bt_p1,
    Bt_p2,
    Bt_p3,
    Bt_p4,

};

static struct regval_list gc0311_init_regs[] = {
	{0xfe, 0xf0},
	{0xfe, 0xf0},
	{0xfe, 0xf0},
	{0x42, 0x00},
	{0x4f, 0x00},
	{0x03, 0x01},
	{0x04, 0x20},
	{0xfc, 0x16},

	///////////////////////////////////////////////
	/////////// system reg ////////////////////////
	///////////////////////////////////////////////
	{0xf1, 0x07},
	{0xf2, 0x01},
	{0xfc, 0x16},
	///////////////////////////////////////////////
	/////////// CISCTL////////////////////////
	///////////////////////////////////////////////
	{0xfe, 0x00},
	//////window setting/////
	{0x0d, 0x01},
	{0x0e, 0xe8},
	{0x0f, 0x02},
	{0x10, 0x88},
	{0x09, 0x00},
	{0x0a, 0x00},
	{0x0b, 0x00},
	{0x0c, 0x04},
	{0x05, 0x02},
	{0x06, 0x2c},
	{0x07, 0x00},
	{0x08, 0xb8},
	///////////20120703////////////////////////
	{0x77, 0x7c},
	{0x78, 0x40},
	{0x79, 0x56},
	///////////////////////////////////////////////
	//GC0311_SET_PAGE1;
	{0xfe , 0x01},
	{0x29, 0x00},   //anti-flicker step [11:8]
	{0x2a, 0x60},   //anti-flicker step [7:0]

	{0x2b, 0x02},   //exp level 0  14.28fps
	{0x2c, 0xa0},
	{0x2d, 0x03},   //exp level 1  12.50fps
	{0x2e, 0x00},
	{0x2f, 0x03},   //exp level 2  10.00fps
	{0x30, 0xc0},
	{0x31, 0x07},   //exp level 3  5.00fps
	{0x32, 0x80},
	{0x33, 0x20},
	//GC0311_SET_PAGE0;
	{0xfe , 0x00},
	{0x17, 0x14},
	{0x19, 0x04},
	{0x1f, 0x08},
	{0x20, 0x01},
	{0x21, 0x48},
	{0x1b, 0x48},
	{0x22, 0xba},
	{0x23, 0x06},//  07--06 20120905
	{0x24, 0x16},

	//global gain for range
	{0x70, 0x54},
	{0x73, 0x80},
	{0x76, 0x80},
	////////////////////////////////////////////////
	///////////////////////BLK//////////////////////
	////////////////////////////////////////////////
	{0x26, 0xf7},
	{0x28, 0x7f},
	{0x29, 0x40},
	{0x33, 0x18},
	{0x34, 0x18},
	{0x35, 0x18},
	{0x36, 0x18},

	////////////////////////////////////////////////
	//////////////block enable/////////////////////
	////////////////////////////////////////////////
	{0x40, 0xdf},
	{0x41, 0x2e},

	{0x42, 0xff},

	{0x44, 0xa2},
	{0x46, 0x02},
	{0x4d, 0x01},
	{0x4f, 0x01},
	{0x7e, 0x08},
	{0x7f, 0xc3},

	//DN & EEINTP
	{0x80, 0xe7},
	{0x82, 0x30},
	{0x84, 0x02},
	{0x89, 0x22},
	{0x90, 0xbc},
	{0x92, 0x08},
	{0x94, 0x08},
	{0x95, 0x64},
	/////////////////////ASDE/////////////
	{0x9a, 0x15},
	{0x9c, 0x46},

	///////////////////////////////////////
	////////////////Y gamma ///////////////////
	////////////////////////////////////////////
	{0xfe, 0x00},
	{0x63, 0x00},
	{0x64, 0x06},
	{0x65, 0x0c},
	{0x66, 0x18},
	{0x67, 0x2A},
	{0x68, 0x3D},
	{0x69, 0x50},
	{0x6A, 0x60},
	{0x6B, 0x80},
	{0x6C, 0xA0},
	{0x6D, 0xC0},
	{0x6E, 0xE0},
	{0x6F, 0xFF},
	{0xfe, 0x00},

	///////////////////////////////////////
	////////////////RGB gamma //////////////
	///////////////////////////////////////
	{0xBF, 0x0E},
	{0xc0, 0x1C},
	{0xc1, 0x34},
	{0xc2, 0x48},
	{0xc3, 0x5A},
	{0xc4, 0x6B},
	{0xc5, 0x7B},
	{0xc6, 0x95},
	{0xc7, 0xAB},
	{0xc8, 0xBF},
	{0xc9, 0xCE},
	{0xcA, 0xD9},
	{0xcB, 0xE4},
	{0xcC, 0xEC},
	{0xcD, 0xF7},
	{0xcE, 0xFD},
	{0xcF, 0xFF},

	////////////////////////////
	/////////////YCP//////////////
	////////////////////////////
	{0xd1, 0x36},
	{0xd2, 0x36},
	{0xdd, 0x00},
	{0xed, 0x00},

	{0xde, 0x38},
	{0xe4, 0x88},
	{0xe5, 0x40},

	{0xfe, 0x01},
	{0x18, 0x22},

	//////////////////////////////////
	///////////MEANSURE WINDOW////////
	/////////////////////////////////
	{0x08, 0xa4},
	{0x09, 0xf0},

	///////////////////////////////////////////////
	/////////////// AEC ////////////////////////
	///////////////////////////////////////////////
	{0xfe, 0x01},

	{0x10, 0x08},

	{0x11, 0x11},
	{0x12, 0x14},
	{0x13, 0x40},
	{0x16, 0xd8},
	{0x17, 0x98},
	{0x18, 0x01},
	{0x21, 0xc0},
	{0x22, 0x40},

	//////////////////////////////
	/////////////AWB///////////////
	////////////////////////////////
	{0x06, 0x10},
	{0x08, 0xa0},

	{0x50, 0xfe},
	{0x51, 0x05},
	{0x52, 0x28},
	{0x53, 0x05},
	{0x54, 0x10},
	{0x55, 0x20},
	{0x56, 0x16},
	{0x57, 0x10},
	{0x58, 0xf0},
	{0x59, 0x10},
	{0x5a, 0x10},
	{0x5b, 0xf0},
	{0x5e, 0xe8},
	{0x5f, 0x20},
	{0x60, 0x20},
	{0x61, 0xe0},

	{0x62, 0x03},
	{0x63, 0x30},
	{0x64, 0xc0},
	{0x65, 0xd0},
	{0x66, 0x20},
	{0x67, 0x00},

	{0x6d, 0x40},
	{0x6e, 0x08},
	{0x6f, 0x08},
	{0x70, 0x10},
	{0x71, 0x62},
	{0x72, 0x2e},//26 fast mode
	{0x73, 0x71},
	{0x74, 0x23},

	{0x75, 0x40},
	{0x76, 0x48},
	{0x77, 0xc2},
	{0x78, 0xa5},

	{0x79, 0x18},
	{0x7a, 0x40},
	{0x7b, 0xb0},
	{0x7c, 0xf5},

	{0x81, 0x80},
	{0x82, 0x60},
	{0x83, 0xa0},

	{0x8a, 0xf8},
	{0x8b, 0xf4},
	{0x8c, 0x0a},
	{0x8d, 0x00},
	{0x8e, 0x00},
	{0x8f, 0x00},
	{0x90, 0x12},

	{0xfe, 0x00},

	///////////////////////////////////////////////
	/////////// SPI reciver////////////////////////
	///////////////////////////////////////////////
	{0xad, 0x00},

	/////////////////////////////
	///////////LSC///////////////
	/////////////////////////////
	{0xfe, 0x01},
	{0xa0, 0x00},
	{0xa1, 0x3c},
	{0xa2, 0x50},
	{0xa3, 0x00},
	{0xa8, 0x09},
	{0xa9, 0x04},
	{0xaa, 0x00},
	{0xab, 0x0c},
	{0xac, 0x02},
	{0xad, 0x00},
	{0xae, 0x15},
	{0xaf, 0x05},
	{0xb0, 0x00},
	{0xb1, 0x0f},
	{0xb2, 0x06},
	{0xb3, 0x00},
	{0xb4, 0x36},
	{0xb5, 0x2a},
	{0xb6, 0x25},
	{0xba, 0x36},
	{0xbb, 0x25},
	{0xbc, 0x22},
	{0xc0, 0x1e},
	{0xc1, 0x18},
	{0xc2, 0x17},
	{0xc6, 0x1c},
	{0xc7, 0x18},
	{0xc8, 0x17},
	{0xb7, 0x00},
	{0xb8, 0x00},
	{0xb9, 0x00},
	{0xbd, 0x00},
	{0xbe, 0x00},
	{0xbf, 0x00},
	{0xc3, 0x00},
	{0xc4, 0x00},
	{0xc5, 0x00},
	{0xc9, 0x00},
	{0xca, 0x00},
	{0xcb, 0x00},
	{0xa4, 0x00},
	{0xa5, 0x00},
	{0xa6, 0x00},
	{0xa7, 0x00},
  ////////////20120613 start////////////
	{0xfe, 0x01},
	{0x74, 0x13},
	{0x15, 0xfe},
	{0x21, 0xe0},

	{0xfe, 0x00},
	{0x41, 0x6e},
	{0x83, 0x03},
	{0x7e, 0x08},
	{0x9c, 0x64},
	{0x95, 0x65},
	{0xd1, 0x2d},
	{0xd2, 0x2d},

	{0xb0, 0x13},
	{0xb1, 0x26},
	{0xb2, 0x07},
	{0xb3, 0xf5},
	{0xb4, 0xea},
	{0xb5, 0x21},
	{0xb6, 0x21},
	{0xb7, 0xe4},
	{0xb8, 0xfb},
  ////////////20120613 end/////////////
	{0xfe, 0x00},
	{0x50, 0x01},  //crop
	{0x44, 0xa2},

	{0xff,0xff},
};

static struct regval_list gc0311_fmt_vga[] = {
    {0xc8,0xBF},
    {0xc9,0xCE},
    {0xcA,0xD9},
    {0xcB,0xE4},
    {0xcC,0xEC},
    {0xcD,0xF7},
    {0xcE,0xFD},
    {0xcF,0xFF},
    {0xff,0xff},
};

static struct regval_list gc0311_fmt_qvga[] = {
    {0xc1,0x34},
    {0xc2,0x48},
    {0xc3,0x5A},
    {0xc4,0x6B},
    {0xc5,0x7B},
    {0xc6,0x95},
    {0xc7,0xAB},
    {0xff,0xff},
};



